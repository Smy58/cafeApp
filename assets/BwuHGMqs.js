import{_ as v,t as o,v as a,x as t,y as l,B as _,Q as m,R as p,M as f,T as b,r as k,j as I,L as w}from"./R5l8HrxH.js";import{o as g}from"./Bc5MGYxx.js";import"./DuEOBa7C.js";const y={props:{item:Object},data(){var n,r,c,d,i;return{id:(n=this.item)==null?void 0:n.id,cafeName:(r=this.item)==null?void 0:r.cafeName,totalCost:(c=this.item)==null?void 0:c.totalCost,waitingTime:(d=this.item)==null?void 0:d.waitingTime,busket:(i=this.item)==null?void 0:i.busket}},computed:{strCost(){return this.totalCost.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},C={class:"order-item"},$={class:"order-item__id"},B=t("p",{class:"order-item__text"},"Ваш заказ принят",-1),N={class:"order-item__info"},O={class:"order-item__info-text"},T=t("span",null,"Заведение:",-1),S={class:"order-item__info-text"},V=t("span",null,"Сумма:",-1),j={class:"order-item__info-text"},L=t("span",null,"Время ожидания:",-1),M={class:"order-item__busket"},R=t("br",null,null,-1),A=t("br",null,null,-1),D={key:0,class:"order-item__pos-info"},E=t("br",null,null,-1),F={key:1,class:"order-item__pos-info"},Q=t("br",null,null,-1);function q(n,r,c,d,i,h){return o(),a("div",C,[t("h3",$,l(i.id),1),B,t("div",N,[t("p",O,[T,_(),t("span",null,l(i.cafeName),1)]),t("p",S,[V,_(),t("span",null,l(h.strCost)+" ₸",1)]),t("p",j,[L,_(),t("span",null,l(i.waitingTime)+" мин",1)])]),t("p",M,[_(" Заказ:"),R,(o(!0),a(m,null,p(i.busket,e=>(o(),a("span",{key:e.id,class:"order-item__pos"},[t("b",null,l(e.name),1),_(" "+l(e.count)+"x",1),A,e.addons.length>0?(o(),a("span",D,[t("span",null,l(e.addons[0].name),1),(o(!0),a(m,null,p(e.addons.slice(1),s=>(o(),a("span",{key:s.id},", "+l(s.name),1))),128)),E])):f("",!0),e.ingredients.length>0?(o(),a("span",F,[t("span",null,l(e.ingredients[0].name),1),(o(!0),a(m,null,p(e.ingredients.slice(1),s=>(o(),a("span",{key:s.id},", "+l(s.name),1))),128)),Q])):f("",!0)]))),128))])])}const z=v(y,[["render",q]]),G=b("order",()=>{const n=k([]),r=I(()=>n.value);return{orders:n,setItems:e=>{e!=null&&e.length&&(n.value=e)},addItem:e=>{const s=n.value;s.push(e),n.value=s},delItem:e=>{const s=n.value,u=s.findIndex(x=>x.id==e);s.splice(u,1),n.value=s},changeCount:e=>{const s=n.value;s.map(u=>{u.id==e.id&&(u.count=e.count)}),n.value=s},getOrders:r}}),H={setup(){},data(){return{orders:[]}},async beforeMount(){const{setItems:n}=G(),r=k([]);await g.getOrders();const{data:c}=await g.getOrders();r.value=await(c==null?void 0:c.value),console.log(r.value),n(r.value),this.orders=[...r.value]}},J={class:"orders-page"},K=t("h2",{class:"orders-page__title"},"Ваши заказы",-1),P={class:"orders-page__list"};function U(n,r,c,d,i,h){const e=z;return o(),a("div",J,[K,t("div",P,[(o(!0),a(m,null,p(i.orders,s=>(o(),w(e,{key:s,item:s},null,8,["item"]))),128))])])}const Z=v(H,[["render",U]]);export{Z as default};
