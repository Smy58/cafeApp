import{_ as f,c as d}from"./BtaiPKAw.js";import{_ as u,t as c,v as l,x as o,y as m,Q as h,z as p,R as g,S as L,L as $,r as v}from"./m3p8uItU.js";import{u as k}from"./DJfDUNfk.js";import{u as w}from"./C8ZOEeOK.js";import"./CStLU7k7.js";const x={data(){var n,e,t,i,s,a;return{name:((n=this.item)==null?void 0:n.name)||"",address:((e=this.item)==null?void 0:e.address)||"",startWorkTime:((t=this.item)==null?void 0:t.startWorkTime)||"00:00",endWorkTime:((i=this.item)==null?void 0:i.endWorkTime)||"00:00",waitingTime:((s=this.item)==null?void 0:s.waitingTime)||0,status:((a=this.item)==null?void 0:a.status)||!1}},props:{item:Object},methods:{openCafe(){this.$router.push({path:"/cafe",query:{cafeId:JSON.stringify(this.item.id)}})}}},C={class:"main-item__title"},T={class:"main-item__address"},I={class:"main-item__content"},y={class:"main-item__info"},W={class:"main-item__text"},D={class:"main-item__info"},M={class:"main-item__text"};function S(n,e,t,i,s,a){const r=f;return c(),l("div",{class:"main-item",onClick:e[0]||(e[0]=(..._)=>a.openCafe&&a.openCafe(..._))},[o("h3",C,m(s.name),1),o("p",T,m(s.address),1),o("div",I,[o("div",y,[o("div",{class:h(`main-item__status ${s.status?"main-item__status_open":""}`)},null,2),o("p",W,m(s.status?"Open":"Closed"),1)]),o("div",D,[p(r,{color:"#58A000"}),o("p",M,"Waiting "+m(s.waitingTime)+" min",1)])])])}const B=u(x,[["render",S]]),A={props:{cafeList:Array}},F={class:"main-list"};function N(n,e,t,i,s,a){const r=B;return c(),l("div",F,[(c(!0),l(g,null,L(t.cafeList,_=>(c(),$(r,{key:_.id,item:_},null,8,["item"]))),128))])}const O=u(A,[["render",N]]),z={setup(){},data(){return{cafeList:[]}},async beforeMount(){const{setItems:n}=k(),{setLoader:e}=w(),t=v([]);e(!0),await d.getCafes();const{data:i}=await d.getCafes();t.value=await(i==null?void 0:i.value),e(!1),n(t.value),this.cafeList=[...t.value]},computed:{filterStatusList(){this.cafeList.forEach(e=>{let t=new Date,i=e.startWorkTime.split(":"),s=e.endWorkTime.split(":"),a=new Date(t.getFullYear(),t.getMonth(),t.getDate(),parseInt(i[0]),parseInt(i[1])),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),parseInt(s[0]),parseInt(s[1]));e.status=a<=t&&t<=r});var n=this.cafeList.sort((e,t)=>e.status===t.status?e.waitingTime-t.waitingTime:e.status?-1:1);return n}}},E={class:"main"},V=o("h2",{class:"main__title"},"Cafes",-1);function Y(n,e,t,i,s,a){const r=O;return c(),l("div",E,[V,p(r,{cafeList:a.filterStatusList},null,8,["cafeList"])])}const R=u(z,[["render",Y]]);export{R as default};
