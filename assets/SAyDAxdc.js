import{_ as f,c as d}from"./B2geYwVo.js";import{_ as l,t as c,v as u,x as o,y as m,Q as h,z as p,R as g,S as L,L as k,r as v}from"./xJfoSkR8.js";import{a as $,u as w}from"./Cm3sh4xz.js";import{u as x}from"./C4IO26kZ.js";import"./CCnVrCTM.js";const C={data(){var n,e,t,a,s,i;return{name:((n=this.item)==null?void 0:n.name)||"",address:((e=this.item)==null?void 0:e.address)||"",startWorkTime:((t=this.item)==null?void 0:t.startWorkTime)||"00:00",endWorkTime:((a=this.item)==null?void 0:a.endWorkTime)||"00:00",waitingTime:((s=this.item)==null?void 0:s.waitingTime)||0,status:((i=this.item)==null?void 0:i.status)||!1}},props:{item:Object},methods:{openCafe(){this.$router.push({path:"/cafe",query:{cafeId:JSON.stringify(this.item.id)}})}}},T={class:"main-item__title"},I={class:"main-item__address"},y={class:"main-item__content"},W={class:"main-item__info"},B={class:"main-item__text"},D={class:"main-item__info"},S={class:"main-item__text"};function M(n,e,t,a,s,i){const r=f;return c(),u("div",{class:"main-item",onClick:e[0]||(e[0]=(..._)=>i.openCafe&&i.openCafe(..._))},[o("h3",T,m(s.name),1),o("p",I,m(s.address),1),o("div",y,[o("div",W,[o("div",{class:h(`main-item__status ${s.status?"main-item__status_open":""}`)},null,2),o("p",B,m(s.status?"Open":"Closed"),1)]),o("div",D,[p(r,{color:"#58A000"}),o("p",S,"Waiting "+m(s.waitingTime)+" min",1)])])])}const A=l(C,[["render",M]]),F={props:{cafeList:Array}},N={class:"main-list"};function O(n,e,t,a,s,i){const r=A;return c(),u("div",N,[(c(!0),u(g,null,L(t.cafeList,_=>(c(),k(r,{key:_.id,item:_},null,8,["item"]))),128))])}const b=l(F,[["render",O]]),z={setup(){},data(){return{cafeList:[]}},async beforeMount(){const{setItems:n}=$(),{setLoader:e}=x(),{clearBusket:t}=w(),a=v([]);e(!0),await d.getCafes();const{data:s}=await d.getCafes();a.value=await(s==null?void 0:s.value),e(!1),n(a.value),this.cafeList=[...a.value],localStorage.removeItem("busket"),t()},computed:{filterStatusList(){this.cafeList.forEach(e=>{let t=new Date,a=e.startWorkTime.split(":"),s=e.endWorkTime.split(":"),i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),parseInt(a[0]),parseInt(a[1])),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),parseInt(s[0]),parseInt(s[1]));e.status=i<=t&&t<=r});var n=this.cafeList.sort((e,t)=>e.status===t.status?e.waitingTime-t.waitingTime:e.status?-1:1);return n}}},E={class:"main"},V=o("h2",{class:"main__title"},"Cafes",-1);function Y(n,e,t,a,s,i){const r=b;return c(),u("div",E,[V,p(r,{cafeList:i.filterStatusList},null,8,["cafeList"])])}const G=l(z,[["render",Y]]);export{G as default};
