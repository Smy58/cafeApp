import{_ as v,t as o,v as r,x as t,y as i,B as _,Q as m,R as p,M as f,T as b,r as k,j as I,L as w}from"./C36Jqkuh.js";import{u as y}from"./CfhJ4hzW.js";import{o as g}from"./Bxq77Av7.js";import"./0MDbMjnL.js";const C={props:{item:Object},data(){var n,c,l,d,a;return{id:(n=this.item)==null?void 0:n.id,cafeName:(c=this.item)==null?void 0:c.cafeName,totalCost:(l=this.item)==null?void 0:l.totalCost,waitingTime:(d=this.item)==null?void 0:d.waitingTime,busket:(a=this.item)==null?void 0:a.busket}},computed:{strCost(){return this.totalCost.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},$={class:"order-item"},B={class:"order-item__id"},N=t("p",{class:"order-item__text"},"Ваш заказ принят",-1),O={class:"order-item__info"},T={class:"order-item__info-text"},L=t("span",null,"Заведение:",-1),S={class:"order-item__info-text"},V=t("span",null,"Сумма:",-1),j={class:"order-item__info-text"},M=t("span",null,"Время ожидания:",-1),R={class:"order-item__busket"},A=t("br",null,null,-1),D=t("br",null,null,-1),E={key:0,class:"order-item__pos-info"},F=t("br",null,null,-1),Q={key:1,class:"order-item__pos-info"},q=t("br",null,null,-1);function z(n,c,l,d,a,h){return o(),r("div",$,[t("h3",B,i(a.id),1),N,t("div",O,[t("p",T,[L,_(),t("span",null,i(a.cafeName),1)]),t("p",S,[V,_(),t("span",null,i(h.strCost)+" ₸",1)]),t("p",j,[M,_(),t("span",null,i(a.waitingTime)+" мин",1)])]),t("p",R,[_(" Заказ:"),A,(o(!0),r(m,null,p(a.busket,e=>(o(),r("span",{key:e.id,class:"order-item__pos"},[t("b",null,i(e.name),1),_(" "+i(e.count)+"x",1),D,e.addons.length>0?(o(),r("span",E,[t("span",null,i(e.addons[0].name),1),(o(!0),r(m,null,p(e.addons.slice(1),s=>(o(),r("span",{key:s.id},", "+i(s.name),1))),128)),F])):f("",!0),e.ingredients.length>0?(o(),r("span",Q,[t("span",null,i(e.ingredients[0].name),1),(o(!0),r(m,null,p(e.ingredients.slice(1),s=>(o(),r("span",{key:s.id},", "+i(s.name),1))),128)),q])):f("",!0)]))),128))])])}const G=v(C,[["render",z]]),H=b("order",()=>{const n=k([]),c=I(()=>n.value);return{orders:n,setItems:e=>{e!=null&&e.length&&(n.value=e)},addItem:e=>{const s=n.value;s.push(e),n.value=s},delItem:e=>{const s=n.value,u=s.findIndex(x=>x.id==e);s.splice(u,1),n.value=s},changeCount:e=>{const s=n.value;s.map(u=>{u.id==e.id&&(u.count=e.count)}),n.value=s},getOrders:c}}),J={setup(){},data(){return{orders:[]}},async beforeMount(){const{setItems:n}=H(),{setLoader:c}=y(),l=k([]);c(!0),await g.getOrders();const{data:d}=await g.getOrders();l.value=await(d==null?void 0:d.value),c(!1),n(l.value),this.orders=[...l.value]}},K={class:"orders-page"},P=t("h2",{class:"orders-page__title"},"Ваши заказы",-1),U={class:"orders-page__list"};function W(n,c,l,d,a,h){const e=G;return o(),r("div",K,[P,t("div",U,[(o(!0),r(m,null,p(a.orders,s=>(o(),w(e,{key:s,item:s},null,8,["item"]))),128))])])}const te=v(J,[["render",W]]);export{te as default};
