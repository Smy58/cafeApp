import{_ as w,a as A,u as C,b as B}from"./C-ohEz9G.js";import{_ as a,t as c,v as h,x as t,z as d,y as l,L as g,M as b,B as S,N as y,O as H,C as O,D as M,P as x,Q as N,R as P}from"./C36Jqkuh.js";import{u as v}from"./CB-gCJTg.js";import{u as F}from"./CfhJ4hzW.js";import{o as V}from"./Bxq77Av7.js";import"./0MDbMjnL.js";const T={props:{color:String,width:String,height:String},data(){return{defWidth:this.width?this.width:"18px",defHeight:this.height?this.height:"20px",defColor:this.color?this.color:"#000"}}},D=["width","height"],I=["fill"];function z(s,o,i,r,n,e){return c(),h("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.defWidth,height:n.defHeight,viewBox:"0 0 24 24"},[t("path",{fill:n.defColor,d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"},null,8,I)],8,D)}const U=a(T,[["render",z]]),$={props:{color:String,width:String,height:String},data(){return{defWidth:this.width?this.width:"18px",defHeight:this.height?this.height:"20px",defColor:this.color?this.color:"#000"}}},J=["width","height"],L=["fill"];function R(s,o,i,r,n,e){return c(),h("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.defWidth,height:n.defHeight,viewBox:"0 0 24 24"},[t("path",{fill:n.defColor,d:"M18 12.998H6a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2"},null,8,L)],8,J)}const Q=a($,[["render",R]]),X={props:{color:String,width:String,height:String},data(){return{defWidth:this.width?this.width:"18px",defHeight:this.height?this.height:"20px",defColor:this.color?this.color:"#000"}}},G=["width","height"],W=["fill"];function q(s,o,i,r,n,e){return c(),h("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.defWidth,height:n.defHeight,viewBox:"0 0 24 24"},[t("path",{fill:n.defColor,d:"M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"},null,8,W)],8,G)}const E=a(X,[["render",q]]),Y={props:{item:Object,onMinus:Function,onPlus:Function,onChange:Function,onDel:Function},data(){var s,o,i,r,n;return{name:((s=this.item)==null?void 0:s.name)||"",addons:((o=this.item)==null?void 0:o.addons)||[],ingredients:((i=this.item)==null?void 0:i.ingredients)||[],cost:((r=this.item)==null?void 0:r.totalCost)||0,count:((n=this.item)==null?void 0:n.count)||1}},methods:{plusCount(){this.count+=1,this.onPlus(this.cost),this.onChange({id:this.item.id,count:this.count,totalCost:this.totalCost})},minusCount(){this.onMinus(this.cost),this.count===1?this.onDel(this.item.id):(this.count-=1,this.onChange({id:this.item.id,count:this.count,totalCost:this.totalCost}))}},computed:{infoText(){let s="";return this.addons.forEach(o=>{s+=o.name+", "}),this.ingredients.forEach(o=>{s+=o.name+", "}),s=s.slice(0,-1),s},totalCost(){return this.cost*this.count},strCost(){return this.totalCost.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},K={class:"busket-position"},Z={class:"busket-position__img"},j={class:"busket-position__content"},tt={class:"busket-position__title"},st={class:"busket-position__text"},ot={class:"busket-position__cost"},et={class:"busket-position__count"},nt={class:"busket-position__count-text"};function it(s,o,i,r,n,e){const _=w,m=U,u=Q,k=E;return c(),h("div",K,[t("div",Z,[d(_,{color:"#f2f2f2"})]),t("div",j,[t("h3",tt,l(n.name),1),t("p",st,l(e.infoText),1),t("p",ot,l(e.strCost)+" ₸",1),t("div",et,[t("button",{onClick:o[0]||(o[0]=(...f)=>e.minusCount&&e.minusCount(...f)),class:"busket-position__count-btn"},[n.count===1?(c(),g(m,{key:0,color:"#0075CA"})):b("",!0),n.count!=1?(c(),g(u,{key:1,color:"#0075CA"})):b("",!0)]),t("p",nt,l(n.count)+" шт",1),t("button",{onClick:o[1]||(o[1]=(...f)=>e.plusCount&&e.plusCount(...f)),class:"busket-position__count-btn"},[d(k,{color:"#0075CA"})])])])])}const ct=a(Y,[["render",it]]),rt={props:{color:String,width:String,height:String},data(){return{defWidth:this.width?this.width:"22px",defHeight:this.height?this.height:"22px",defColor:this.color?this.color:"#000"}}},_t=["width","height"],ht=["fill"];function lt(s,o,i,r,n,e){return c(),h("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.defWidth,height:n.defHeight,viewBox:"0 0 24 24"},[t("path",{fill:n.defColor,d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-6-2c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2m6 16H6V8h2v2c0 .55.45 1 1 1s1-.45 1-1V8h4v2c0 .55.45 1 1 1s1-.45 1-1V8h2z"},null,8,ht)],8,_t)}const ut=a(rt,[["render",lt]]),at={props:{busketCost:String,openConfirm:Function}},dt={class:"busket-bar"},mt={class:"busket-bar__text"};function ft(s,o,i,r,n,e){return c(),h("div",dt,[t("p",mt,[S("Итого: "),t("b",null,l(i.busketCost)+" ₸",1)]),t("button",{onClick:o[0]||(o[0]=(..._)=>i.openConfirm&&i.openConfirm(..._)),class:"busket-bar__btn"},"Перейти к оплате")])}const pt=a(at,[["render",ft]]),gt={props:{toogleBonus:Function}},bt=s=>(O("data-v-4a95c4ee"),s=s(),M(),s),kt={class:"checkbox"},Ct={class:"checkbox__label"},vt=bt(()=>t("span",null,[t("i")],-1));function xt(s,o,i,r,n,e){return c(),h("div",kt,[t("label",Ct,[y(t("input",{onClick:o[0]||(o[0]=(..._)=>i.toogleBonus&&i.toogleBonus(..._)),"onUpdate:modelValue":o[1]||(o[1]=_=>s.isCheck=_),type:"checkbox"},null,512),[[H,s.isCheck]]),vt])])}const wt=a(gt,[["render",xt],["__scopeId","data-v-4a95c4ee"]]),At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALvSURBVHgB7ZjPbxJBFMffLiw/lli2tCQqtRitSbkQ8UIvJuqtXky9mXjx4NXUm/+Ct8aTiYdeNJ5s9FJvtsZLa1KreLBJqSlYSJUf2ZoUKAvFeYOzO4Cp3QVamvBJNjtvdsJ89/0aAKBPnz4nG4E3Vl9On5eclVkyeZmYChw1NXhdLlceRu483YRmgSjO4aysHouwRtTyXiXCRIpsVpK0GTh+cYjidNpnmaELFEThFvQItXqKUUToTfRI2qFDiJIbJNkHNnJHCtk4dIK2BcrDY+Afvwke/6WWZ7/TMchvLLQl1rJA9Ni56H1d2L5WpHM8A2fD9MrFF+Dn1zmwgiWBGMrg1QfgkIeo/f3dY8DUvnDj0T/XD41dB5tDhvTKczCLpSLxhyZ1cSV1C0o7WzTMB6GMRmF4fBK6LtBLNlJGJ3RbK+brA6F1rVbIU69VSfgxBQaDE9T7XRU4SAQycOPUygs6/rH0jAriSZK53ew6rezt2CtSNF/oC3ZVoMxVK4Z2XyvotppYalnv8o5Q8bhWCUZh4EwYzGCqSP4XnvzGIq1qXKcmP8IeEYUXKyqbJAN4BDBDW32wkFlvsMkRBb++zRNvpWjOMQJX7upFZWtqRV0V2Jxzp8O3aQGVCzlIfHiiPxcdhqgqJ/wwmMpB3JDfoLkxO9x1L6G3TnG5VlJTxpiEvGsCkTw5FRhYAA0fxnmKf7aTXDbGiWUwg2mBmPzMi5LHRwvAd/Eatfn8cnkD9I7HYZF4Db2Pl5rsskCN5FdmbV63HUQg85a2a+Sk5KmH26UE6AtgH7Ry1Fkqknx8kbYMyV1vO3xoGehNzFH0mlsZgezaW7CC5SrOkHYi0dZR00NbJmLkpnXbsTk6b5U220yO3tN/jzts1AjmaIEccdgLzVZtRwUymFAUk/5kPs8Ogi8SFXoQ41edAJ+hR6hB7Q0bGwLBfg96w4uqTahOM0MXGJqa2RQFewQ49UeMSr5svBeFSiQ0Zfz10adPn5POH2XuD9qoAclrAAAAAElFTkSuQmCC",Bt={props:{busketCost:Number,cafeName:String,closeConfirm:Function,isOpen:Boolean,confirmOrder:Function,totalPayment:Number,bonusPayment:Number,toogleBonus:Function},data(){return{imageGold:At,bankHide:!1}},methods:{costToStr(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},toogleBankHide(){this.bankHide=!this.bankHide}}},St={class:"confirm__content"},yt={class:"confirm__info"},Ht=t("p",{class:"confirm__text"},"Заведение",-1),Ot={class:"confirm__value"},Mt={class:"confirm__info"},Nt=t("p",{class:"confirm__text"},"Сумма",-1),Pt={class:"confirm__value"},Ft={class:"confirm__info"},Vt={class:"confirm__bonus"},Tt=t("p",{class:"confirm__text confirm__text_bonus"},"Потратить Бонусы",-1),Dt={class:"confirm__bonus-bank"},It={class:"confirm__info"},zt=t("p",{class:"confirm__text confirm__text_bold"},"К оплате",-1),Ut={class:"confirm__value confirm__value_bold"},$t={class:"confirm__payment"},Jt={class:"confirm__payment-titles"},Lt=t("h4",{class:"confirm__payment-title"},"Способ оплаты",-1),Rt={class:"confirm__payment-type"},Qt=["src"],Xt=t("p",{class:"confirm__payment-name"},"Kaspi Gold",-1),Gt={class:"confirm__payment-cost"};function Wt(s,o,i,r,n,e){const _=A,m=wt;return c(),h("div",{class:x(`confirm ${i.isOpen?"confirm_show":""}`)},[t("button",{onClick:o[0]||(o[0]=(...u)=>i.closeConfirm&&i.closeConfirm(...u)),class:"confirm__close"},[d(_)]),t("div",St,[t("div",yt,[Ht,t("p",Ot,l(i.cafeName),1)]),t("div",Mt,[Nt,t("p",Pt,l(e.costToStr(i.busketCost))+" ₸",1)]),t("div",Ft,[t("div",Vt,[Tt,t("span",Dt,"Накоплено "+l(e.costToStr(i.bonusPayment))+" Б",1)]),d(m,{toogleBonus:i.toogleBonus},null,8,["toogleBonus"])]),t("div",It,[zt,t("p",Ut,l(e.costToStr(i.totalPayment))+" ₸",1)])]),t("div",$t,[t("div",Jt,[Lt,t("p",{onClick:o[1]||(o[1]=(...u)=>e.toogleBankHide&&e.toogleBankHide(...u)),class:"confirm__payment-hide"},"Скрыть сумму")]),t("div",Rt,[t("img",{src:n.imageGold,alt:"kaspiGold",class:"confirm__payment-img"},null,8,Qt),Xt,t("p",Gt,l(n.bankHide?"******":"300 000")+" ₸",1)]),t("button",{onClick:o[2]||(o[2]=(...u)=>i.confirmOrder&&i.confirmOrder(...u)),class:"confirm__btn"},"Оплатить")])],2)}const qt=a(Bt,[["render",Wt]]),Et={data(){return{isOpen:!1,bonus:15500,isBonus:!1}},methods:{toogleBonus(){this.isBonus=!this.isBonus},handleMinus(s){this.busketCost-=s},handlePlus(s){this.busketCost+=s},handleChange(s){const{changeCount:o}=C();o(s)},handleDel(s){const{delItem:o}=C();o(s)},toogleOpen(){this.isOpen=!this.isOpen},async confirmOrder(){const{getCafe:s}=v(),{setLoader:o}=F();let i={busket:this.busketStore,cafeID:s.id,cafeName:s.name,totalCost:this.totalPayment,waitingTime:s.waitingTime};console.log(i),o(!0),V.addOrder(i).then(r=>{console.log(r.value),o(!1),this.$router.push({path:"/ok",query:{order:JSON.stringify(r.value)}})})},goBack(){this.$router.go(-1)}},computed:{cafeName(){const{getCafe:s}=v();return s.name},strCost(){return this.busketCost.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},busketStore(){const{getBusket:s}=C();return s||[]},busketCost(){let s=0;return this.busketStore.forEach(o=>{s+=o.totalCost*o.count}),s},bonusPayment(){return this.isBonus?this.busketCost-this.bonus<10?this.bonus-this.busketCost+10:this.bonus-this.busketCost:this.bonus},totalPayment(){return this.isBonus?this.busketCost-this.bonus<10?10:this.busketCost-this.bonus:this.busketCost}}},Yt={class:"busket-page"},Kt=t("h2",{class:"busket-page__title"},"Заказ",-1),Zt={class:"busket-page__list"},jt={key:0,class:"busket-page__empty"},ts={class:"busket-page__icon"},ss=t("h4",{class:"busket-page__empty-title"},"Корзина пуста!",-1);function os(s,o,i,r,n,e){const _=B,m=ct,u=ut,k=pt,f=qt;return c(),h("div",Yt,[d(_),Kt,t("div",Zt,[(c(!0),h(N,null,P(e.busketStore,p=>(c(),g(m,{key:p.id,item:p,onMinus:e.handleMinus,onPlus:e.handlePlus,onChange:e.handleChange,onDel:e.handleDel},null,8,["item","onMinus","onPlus","onChange","onDel"]))),128))]),e.busketStore.length==0?(c(),h("div",jt,[t("div",ts,[d(u,{width:"50px",height:"50px",color:"#fff"})]),ss,t("button",{onClick:o[0]||(o[0]=(...p)=>e.goBack&&e.goBack(...p)),class:"busket-page__empty-btn"},"Вернуться в меню")])):b("",!0),e.busketStore.length>0?(c(),g(k,{key:1,busketCost:e.strCost,openConfirm:e.toogleOpen},null,8,["busketCost","openConfirm"])):b("",!0),d(f,{busketCost:e.busketCost,cafeName:e.cafeName,closeConfirm:e.toogleOpen,isOpen:n.isOpen,confirmOrder:e.confirmOrder,bonusPayment:e.bonusPayment,totalPayment:e.totalPayment,toogleBonus:e.toogleBonus},null,8,["busketCost","cafeName","closeConfirm","isOpen","confirmOrder","bonusPayment","totalPayment","toogleBonus"]),t("div",{class:x(`busket-page__bg ${n.isOpen?"busket-page__bg_show":""}`)},null,2)])}const hs=a(Et,[["render",os]]);export{hs as default};
