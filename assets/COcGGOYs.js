import{_ as f,c as d}from"./B0HyKWlw.js";import{_ as u,t as c,v as l,x as n,y as m,P as h,z as p,Q as g,R as L,L as $,r as v}from"./R5l8HrxH.js";import{u as k}from"./Brls5V5t.js";import"./DuEOBa7C.js";const w={data(){var a,e,t,o,s,i;return{name:((a=this.item)==null?void 0:a.name)||"",address:((e=this.item)==null?void 0:e.address)||"",startWorkTime:((t=this.item)==null?void 0:t.startWorkTime)||"00:00",endWorkTime:((o=this.item)==null?void 0:o.endWorkTime)||"00:00",waitingTime:((s=this.item)==null?void 0:s.waitingTime)||0,status:((i=this.item)==null?void 0:i.status)||!1}},props:{item:Object},methods:{openCafe(){this.$router.push({path:"/cafe",query:{cafeId:JSON.stringify(this.item.id)}})}}},x={class:"main-item__title"},C={class:"main-item__address"},T={class:"main-item__content"},I={class:"main-item__info"},y={class:"main-item__text"},W={class:"main-item__info"},D={class:"main-item__text"};function M(a,e,t,o,s,i){const r=f;return c(),l("div",{class:"main-item",onClick:e[0]||(e[0]=(..._)=>i.openCafe&&i.openCafe(..._))},[n("h3",x,m(s.name),1),n("p",C,m(s.address),1),n("div",T,[n("div",I,[n("div",{class:h(`main-item__status ${s.status?"main-item__status_open":""}`)},null,2),n("p",y,m(s.status?"Open":"Closed"),1)]),n("div",W,[p(r,{color:"#58A000"}),n("p",D,"Waiting "+m(s.waitingTime)+" min",1)])])])}const B=u(w,[["render",M]]),S={props:{cafeList:Array}},A={class:"main-list"};function F(a,e,t,o,s,i){const r=B;return c(),l("div",A,[(c(!0),l(g,null,L(t.cafeList,_=>(c(),$(r,{key:_.id,item:_},null,8,["item"]))),128))])}const N=u(S,[["render",F]]),O={setup(){},data(){return{cafeList:[]}},async beforeMount(){const{setItems:a}=k(),e=v([]);await d.getCafes();const{data:t}=await d.getCafes();e.value=await(t==null?void 0:t.value),a(e.value),this.cafeList=[...e.value]},computed:{filterStatusList(){this.cafeList.forEach(e=>{let t=new Date,o=e.startWorkTime.split(":"),s=e.endWorkTime.split(":"),i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),parseInt(o[0]),parseInt(o[1])),r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),parseInt(s[0]),parseInt(s[1]));e.status=i<=t&&t<=r});var a=this.cafeList.sort((e,t)=>e.status===t.status?e.waitingTime-t.waitingTime:e.status?-1:1);return a}}},z={class:"main"},E=n("h2",{class:"main__title"},"Cafes",-1);function V(a,e,t,o,s,i){const r=N;return c(),l("div",z,[E,p(r,{cafeList:i.filterStatusList},null,8,["cafeList"])])}const J=u(O,[["render",V]]);export{J as default};
