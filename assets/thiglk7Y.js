import{_ as w,a as A,u as C,b as B}from"./OnemMi3x.js";import{_ as a,t as c,v as h,x as t,z as d,y as l,L as g,M as b,B as S,N as y,O as H,C as O,D as M,P as x,Q as N,R as P}from"./R5l8HrxH.js";import{u as v}from"./Brls5V5t.js";import{o as F}from"./Bc5MGYxx.js";import"./DuEOBa7C.js";const V={props:{color:String,width:String,height:String},data(){return{defWidth:this.width?this.width:"18px",defHeight:this.height?this.height:"20px",defColor:this.color?this.color:"#000"}}},T=["width","height"],D=["fill"];function I(s,o,i,_,n,e){return c(),h("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.defWidth,height:n.defHeight,viewBox:"0 0 24 24"},[t("path",{fill:n.defColor,d:"M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM9 17h2V8H9zm4 0h2V8h-2zM7 6v13z"},null,8,D)],8,T)}const z=a(V,[["render",I]]),U={props:{color:String,width:String,height:String},data(){return{defWidth:this.width?this.width:"18px",defHeight:this.height?this.height:"20px",defColor:this.color?this.color:"#000"}}},$=["width","height"],J=["fill"];function R(s,o,i,_,n,e){return c(),h("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.defWidth,height:n.defHeight,viewBox:"0 0 24 24"},[t("path",{fill:n.defColor,d:"M18 12.998H6a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2"},null,8,J)],8,$)}const L=a(U,[["render",R]]),Q={props:{color:String,width:String,height:String},data(){return{defWidth:this.width?this.width:"18px",defHeight:this.height?this.height:"20px",defColor:this.color?this.color:"#000"}}},X=["width","height"],G=["fill"];function W(s,o,i,_,n,e){return c(),h("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.defWidth,height:n.defHeight,viewBox:"0 0 24 24"},[t("path",{fill:n.defColor,d:"M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"},null,8,G)],8,X)}const q=a(Q,[["render",W]]),E={props:{item:Object,onMinus:Function,onPlus:Function,onChange:Function,onDel:Function},data(){var s,o,i,_,n;return{name:((s=this.item)==null?void 0:s.name)||"",addons:((o=this.item)==null?void 0:o.addons)||[],ingredients:((i=this.item)==null?void 0:i.ingredients)||[],cost:((_=this.item)==null?void 0:_.totalCost)||0,count:((n=this.item)==null?void 0:n.count)||1}},methods:{plusCount(){this.count+=1,this.onPlus(this.cost),this.onChange({id:this.item.id,count:this.count,totalCost:this.totalCost})},minusCount(){this.onMinus(this.cost),this.count===1?this.onDel(this.item.id):(this.count-=1,this.onChange({id:this.item.id,count:this.count,totalCost:this.totalCost}))}},computed:{infoText(){let s="";return this.addons.forEach(o=>{s+=o.name+", "}),this.ingredients.forEach(o=>{s+=o.name+", "}),s=s.slice(0,-1),s},totalCost(){return this.cost*this.count},strCost(){return this.totalCost.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},Y={class:"busket-position"},K={class:"busket-position__img"},Z={class:"busket-position__content"},j={class:"busket-position__title"},tt={class:"busket-position__text"},st={class:"busket-position__cost"},ot={class:"busket-position__count"},et={class:"busket-position__count-text"};function nt(s,o,i,_,n,e){const r=w,m=z,u=L,k=q;return c(),h("div",Y,[t("div",K,[d(r,{color:"#f2f2f2"})]),t("div",Z,[t("h3",j,l(n.name),1),t("p",tt,l(e.infoText),1),t("p",st,l(e.strCost)+" ₸",1),t("div",ot,[t("button",{onClick:o[0]||(o[0]=(...f)=>e.minusCount&&e.minusCount(...f)),class:"busket-position__count-btn"},[n.count===1?(c(),g(m,{key:0,color:"#0075CA"})):b("",!0),n.count!=1?(c(),g(u,{key:1,color:"#0075CA"})):b("",!0)]),t("p",et,l(n.count)+" шт",1),t("button",{onClick:o[1]||(o[1]=(...f)=>e.plusCount&&e.plusCount(...f)),class:"busket-position__count-btn"},[d(k,{color:"#0075CA"})])])])])}const it=a(E,[["render",nt]]),ct={props:{color:String,width:String,height:String},data(){return{defWidth:this.width?this.width:"22px",defHeight:this.height?this.height:"22px",defColor:this.color?this.color:"#000"}}},_t=["width","height"],rt=["fill"];function ht(s,o,i,_,n,e){return c(),h("svg",{xmlns:"http://www.w3.org/2000/svg",width:n.defWidth,height:n.defHeight,viewBox:"0 0 24 24"},[t("path",{fill:n.defColor,d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-6-2c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2m6 16H6V8h2v2c0 .55.45 1 1 1s1-.45 1-1V8h4v2c0 .55.45 1 1 1s1-.45 1-1V8h2z"},null,8,rt)],8,_t)}const lt=a(ct,[["render",ht]]),ut={props:{busketCost:String,openConfirm:Function}},at={class:"busket-bar"},dt={class:"busket-bar__text"};function mt(s,o,i,_,n,e){return c(),h("div",at,[t("p",dt,[S("Итого: "),t("b",null,l(i.busketCost)+" ₸",1)]),t("button",{onClick:o[0]||(o[0]=(...r)=>i.openConfirm&&i.openConfirm(...r)),class:"busket-bar__btn"},"Перейти к оплате")])}const ft=a(ut,[["render",mt]]),pt={props:{toogleBonus:Function}},gt=s=>(O("data-v-4a95c4ee"),s=s(),M(),s),bt={class:"checkbox"},kt={class:"checkbox__label"},Ct=gt(()=>t("span",null,[t("i")],-1));function vt(s,o,i,_,n,e){return c(),h("div",bt,[t("label",kt,[y(t("input",{onClick:o[0]||(o[0]=(...r)=>i.toogleBonus&&i.toogleBonus(...r)),"onUpdate:modelValue":o[1]||(o[1]=r=>s.isCheck=r),type:"checkbox"},null,512),[[H,s.isCheck]]),Ct])])}const xt=a(pt,[["render",vt],["__scopeId","data-v-4a95c4ee"]]),wt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALvSURBVHgB7ZjPbxJBFMffLiw/lli2tCQqtRitSbkQ8UIvJuqtXky9mXjx4NXUm/+Ct8aTiYdeNJ5s9FJvtsZLa1KreLBJqSlYSJUf2ZoUKAvFeYOzO4Cp3QVamvBJNjtvdsJ89/0aAKBPnz4nG4E3Vl9On5eclVkyeZmYChw1NXhdLlceRu483YRmgSjO4aysHouwRtTyXiXCRIpsVpK0GTh+cYjidNpnmaELFEThFvQItXqKUUToTfRI2qFDiJIbJNkHNnJHCtk4dIK2BcrDY+Afvwke/6WWZ7/TMchvLLQl1rJA9Ni56H1d2L5WpHM8A2fD9MrFF+Dn1zmwgiWBGMrg1QfgkIeo/f3dY8DUvnDj0T/XD41dB5tDhvTKczCLpSLxhyZ1cSV1C0o7WzTMB6GMRmF4fBK6LtBLNlJGJ3RbK+brA6F1rVbIU69VSfgxBQaDE9T7XRU4SAQycOPUygs6/rH0jAriSZK53ew6rezt2CtSNF/oC3ZVoMxVK4Z2XyvotppYalnv8o5Q8bhWCUZh4EwYzGCqSP4XnvzGIq1qXKcmP8IeEYUXKyqbJAN4BDBDW32wkFlvsMkRBb++zRNvpWjOMQJX7upFZWtqRV0V2Jxzp8O3aQGVCzlIfHiiPxcdhqgqJ/wwmMpB3JDfoLkxO9x1L6G3TnG5VlJTxpiEvGsCkTw5FRhYAA0fxnmKf7aTXDbGiWUwg2mBmPzMi5LHRwvAd/Eatfn8cnkD9I7HYZF4Db2Pl5rsskCN5FdmbV63HUQg85a2a+Sk5KmH26UE6AtgH7Ry1Fkqknx8kbYMyV1vO3xoGehNzFH0mlsZgezaW7CC5SrOkHYi0dZR00NbJmLkpnXbsTk6b5U220yO3tN/jzts1AjmaIEccdgLzVZtRwUymFAUk/5kPs8Ogi8SFXoQ41edAJ+hR6hB7Q0bGwLBfg96w4uqTahOM0MXGJqa2RQFewQ49UeMSr5svBeFSiQ0Zfz10adPn5POH2XuD9qoAclrAAAAAElFTkSuQmCC",At={props:{busketCost:Number,cafeName:String,closeConfirm:Function,isOpen:Boolean,confirmOrder:Function,totalPayment:Number,bonusPayment:Number,toogleBonus:Function},data(){return{imageGold:wt,bankHide:!1}},methods:{costToStr(s){return s.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},toogleBankHide(){this.bankHide=!this.bankHide}}},Bt={class:"confirm__content"},St={class:"confirm__info"},yt=t("p",{class:"confirm__text"},"Заведение",-1),Ht={class:"confirm__value"},Ot={class:"confirm__info"},Mt=t("p",{class:"confirm__text"},"Сумма",-1),Nt={class:"confirm__value"},Pt={class:"confirm__info"},Ft={class:"confirm__bonus"},Vt=t("p",{class:"confirm__text confirm__text_bonus"},"Потратить Бонусы",-1),Tt={class:"confirm__bonus-bank"},Dt={class:"confirm__info"},It=t("p",{class:"confirm__text confirm__text_bold"},"К оплате",-1),zt={class:"confirm__value confirm__value_bold"},Ut={class:"confirm__payment"},$t={class:"confirm__payment-titles"},Jt=t("h4",{class:"confirm__payment-title"},"Способ оплаты",-1),Rt={class:"confirm__payment-type"},Lt=["src"],Qt=t("p",{class:"confirm__payment-name"},"Kaspi Gold",-1),Xt={class:"confirm__payment-cost"};function Gt(s,o,i,_,n,e){const r=A,m=xt;return c(),h("div",{class:x(`confirm ${i.isOpen?"confirm_show":""}`)},[t("button",{onClick:o[0]||(o[0]=(...u)=>i.closeConfirm&&i.closeConfirm(...u)),class:"confirm__close"},[d(r)]),t("div",Bt,[t("div",St,[yt,t("p",Ht,l(i.cafeName),1)]),t("div",Ot,[Mt,t("p",Nt,l(e.costToStr(i.busketCost))+" ₸",1)]),t("div",Pt,[t("div",Ft,[Vt,t("span",Tt,"Накоплено "+l(e.costToStr(i.bonusPayment))+" Б",1)]),d(m,{toogleBonus:i.toogleBonus},null,8,["toogleBonus"])]),t("div",Dt,[It,t("p",zt,l(e.costToStr(i.totalPayment))+" ₸",1)])]),t("div",Ut,[t("div",$t,[Jt,t("p",{onClick:o[1]||(o[1]=(...u)=>e.toogleBankHide&&e.toogleBankHide(...u)),class:"confirm__payment-hide"},"Скрыть сумму")]),t("div",Rt,[t("img",{src:n.imageGold,alt:"kaspiGold",class:"confirm__payment-img"},null,8,Lt),Qt,t("p",Xt,l(n.bankHide?"******":"300 000")+" ₸",1)]),t("button",{onClick:o[2]||(o[2]=(...u)=>i.confirmOrder&&i.confirmOrder(...u)),class:"confirm__btn"},"Оплатить")])],2)}const Wt=a(At,[["render",Gt]]),qt={data(){return{isOpen:!1,bonus:15500,isBonus:!1}},methods:{toogleBonus(){this.isBonus=!this.isBonus},handleMinus(s){this.busketCost-=s},handlePlus(s){this.busketCost+=s},handleChange(s){const{changeCount:o}=C();o(s)},handleDel(s){const{delItem:o}=C();o(s)},toogleOpen(){this.isOpen=!this.isOpen},async confirmOrder(){const{getCafe:s}=v();let o={busket:this.busketStore,cafeID:s.id,cafeName:s.name,totalCost:this.totalPayment,waitingTime:s.waitingTime};console.log(o),F.addOrder(o).then(i=>{console.log(i.value),this.$router.push({path:"/ok",query:{order:JSON.stringify(i.value)}})})},goBack(){this.$router.go(-1)}},computed:{cafeName(){const{getCafe:s}=v();return s.name},strCost(){return this.busketCost.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")},busketStore(){const{getBusket:s}=C();return s||[]},busketCost(){let s=0;return this.busketStore.forEach(o=>{s+=o.totalCost*o.count}),s},bonusPayment(){return this.isBonus?this.busketCost-this.bonus<10?this.bonus-this.busketCost+10:this.bonus-this.busketCost:this.bonus},totalPayment(){return this.isBonus?this.busketCost-this.bonus<10?10:this.busketCost-this.bonus:this.busketCost}}},Et={class:"busket-page"},Yt=t("h2",{class:"busket-page__title"},"Заказ",-1),Kt={class:"busket-page__list"},Zt={key:0,class:"busket-page__empty"},jt={class:"busket-page__icon"},ts=t("h4",{class:"busket-page__empty-title"},"Корзина пуста!",-1);function ss(s,o,i,_,n,e){const r=B,m=it,u=lt,k=ft,f=Wt;return c(),h("div",Et,[d(r),Yt,t("div",Kt,[(c(!0),h(N,null,P(e.busketStore,p=>(c(),g(m,{key:p.id,item:p,onMinus:e.handleMinus,onPlus:e.handlePlus,onChange:e.handleChange,onDel:e.handleDel},null,8,["item","onMinus","onPlus","onChange","onDel"]))),128))]),e.busketStore.length==0?(c(),h("div",Zt,[t("div",jt,[d(u,{width:"50px",height:"50px",color:"#fff"})]),ts,t("button",{onClick:o[0]||(o[0]=(...p)=>e.goBack&&e.goBack(...p)),class:"busket-page__empty-btn"},"Вернуться в меню")])):b("",!0),e.busketStore.length>0?(c(),g(k,{key:1,busketCost:e.strCost,openConfirm:e.toogleOpen},null,8,["busketCost","openConfirm"])):b("",!0),d(f,{busketCost:e.busketCost,cafeName:e.cafeName,closeConfirm:e.toogleOpen,isOpen:n.isOpen,confirmOrder:e.confirmOrder,bonusPayment:e.bonusPayment,totalPayment:e.totalPayment,toogleBonus:e.toogleBonus},null,8,["busketCost","cafeName","closeConfirm","isOpen","confirmOrder","bonusPayment","totalPayment","toogleBonus"]),t("div",{class:x(`busket-page__bg ${n.isOpen?"busket-page__bg_show":""}`)},null,2)])}const _s=a(qt,[["render",ss]]);export{_s as default};
